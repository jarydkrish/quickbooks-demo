<div class="mx-auto max-w-3xl px-4 py-12">
  <div class="text-center">
    <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl">
      QuickBooks Invoicing Demo
    </h1>
    <p class="mt-4 text-lg text-gray-600">
      Connect your QuickBooks Sandbox account and enqueue a sample invoice creation job.
    </p>
  </div>

  <% if quickbooks_connected? %>
    <div class="mt-10 rounded-xl border border-green-200 bg-green-50 p-6 text-left">
      <h2 class="text-2xl font-semibold text-green-800">You're connected âœ…</h2>
      <p class="mt-2 text-green-900">Your app is authenticated with QuickBooks. You're ready to create invoices.</p>

      <div class="mt-6">
        <p class="text-gray-700">Next step: build actions that use your QuickBooks connection (e.g., list customers, create invoices).</p>
        <!-- Add buttons/routes here once implemented -->
      </div>
    </div>
  <% else %>
    <div class="mt-10 rounded-2xl border border-gray-200 bg-white p-8 shadow-sm">
      <h2 class="text-2xl font-semibold text-gray-900">Connect your QuickBooks account</h2>
      <p class="mt-2 text-gray-700">This demo uses OAuth 2.0 to link your QuickBooks Sandbox company.</p>

      <% if quickbooks_env_configured? %>
        <div class="mt-6">
          <%= link_to "Connect QuickBooks", quickbooks_authenticate_path, class: "inline-flex items-center rounded-lg bg-indigo-600 px-6 py-3 text-white shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500" %>
        </div>
        <p class="mt-3 text-sm text-gray-500">You'll be redirected to Intuit to authorize access.</p>
      <% else %>
        <div class="mt-6 rounded-lg border border-amber-200 bg-amber-50 p-5">
          <h3 class="font-medium text-amber-900">Environment setup required</h3>
          <p class="mt-2 text-amber-900">Set your OAuth credentials before connecting:</p>
          <ul class="mt-3 list-disc pl-6 text-amber-900">
            <% quickbooks_env_issues.each do |issue| %>
              <% case issue
                 when :client_id_missing %>
                  <li>INTUIT_CLIENT_ID is missing</li>
              <% when :client_id_placeholder %>
                  <li>INTUIT_CLIENT_ID looks like a placeholder; replace it with your real Client ID</li>
              <% when :client_secret_missing %>
                  <li>INTUIT_CLIENT_SECRET is missing</li>
              <% when :client_secret_placeholder %>
                  <li>INTUIT_CLIENT_SECRET looks like a placeholder; replace it with your real Client Secret</li>
              <% end %>
            <% end %>
          </ul>
          <div class="mt-4 rounded-md bg-white p-4 text-sm text-gray-700">
            <p class="font-mono">.env</p>
            <pre class="mt-2 overflow-auto rounded bg-gray-50 p-3 text-xs text-gray-800"><code>INTUIT_CLIENT_ID=your_client_id
INTUIT_CLIENT_SECRET=your_client_secret
</code></pre>
            <p class="mt-2">Then restart your server to pick up changes.</p>
          </div>
        </div>
        <div class="mt-6">
          <button disabled class="inline-flex cursor-not-allowed items-center rounded-lg bg-gray-300 px-6 py-3 text-gray-600">
            Connect QuickBooks
          </button>
        </div>
      <% end %>
    </div>
  <% end %>

  <div class="mt-12 text-center text-sm text-gray-500">
    <p>Sandbox mode is <span class="font-mono"><%= Quickbooks.sandbox_mode ? "ON" : "OFF" %></span>.</p>
  </div>
</div>
